<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recalibration of datasets • TrackMateR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Recalibration of datasets">
<meta property="og:description" content="Learn how to get recalibrate datasets using TrackMateR.
">
<meta property="og:image" content="https://quantixed.github.io/TrackMateR/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">TrackMateR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.11</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="../articles/TrackMateR.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Guides

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/TrackMateR.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/comparison.html">Comparison of multiple datasets</a>
    </li>
    <li>
      <a href="../articles/recalibration.html">Recalibration of datasets</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Change log</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/quantixed/TrackMateR" class="external-link">
    <span class="fa fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Recalibration of datasets</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/quantixed/TrackMateR/blob/master/vignettes/recalibration.Rmd" class="external-link"><code>vignettes/recalibration.Rmd</code></a></small>
      <div class="hidden name"><code>recalibration.Rmd</code></div>

    </div>

    
    
<p>In the original example, we saw how to load one dataset and
recalibrate.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quantixed.github.io/TrackMateR/">TrackMateR</a></span><span class="op">)</span></span>
<span><span class="co"># an example file is provided, otherwise use file.choose()</span></span>
<span><span class="va">xmlPath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ExampleTrackMateData.xml"</span>, package<span class="op">=</span><span class="st">"TrackMateR"</span><span class="op">)</span></span>
<span><span class="co"># read the TrackMate XML file into R using</span></span>
<span><span class="va">tmObj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readTrackMateXML.html">readTrackMateXML</a></span><span class="op">(</span>XMLpath <span class="op">=</span> <span class="va">xmlPath</span><span class="op">)</span></span>
<span><span class="co"># Pixel size is 0.04 um and original data was 1 pixel, xyscalar = 0.04</span></span>
<span><span class="va">tmObj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/correctTrackMateData.html">correctTrackMateData</a></span><span class="op">(</span>dataList <span class="op">=</span> <span class="va">tmObj</span>, xyscalar <span class="op">=</span> <span class="fl">0.04</span>, xyunit <span class="op">=</span> <span class="st">"um"</span><span class="op">)</span></span></code></pre></div>
<p>For the example file, the spatial units are 1 pixel and not the real
value which is 0.04 um per pixel. So to convert we can specify
<code>xyscalar</code> to change 1 to 0.04 and specify
<code>xyunit</code> to change from “pixel” to “um”. If the file had 2
pixels as the spatial unit (for some reason), to convert to 0.04 um we
would need to use <code>xyscalar = 0.02, xyunit = "um"</code></p>
<p>The units (<code>xyunit</code> and <code>tunit</code>) can be any
arbitrary string. The use of “um” is preferred over “µm” because the mu
character prints inconsistently in R graphics across platforms.</p>
<p>If the time scaling of the file is 0.07 s and we would prefer ms as
the unit,</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmObj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/correctTrackMateData.html">correctTrackMateData</a></span><span class="op">(</span>dataList <span class="op">=</span> <span class="va">tmObj</span>, xyscalar <span class="op">=</span> <span class="fl">0.04</span>, xyunit <span class="op">=</span> <span class="st">"um"</span>, tscalar <span class="op">=</span> <span class="fl">1000</span>, tunit <span class="op">=</span> <span class="st">"ms"</span><span class="op">)</span></span></code></pre></div>
<p>this is because the file is loaded in and scaled at 1 s, so the
conversion needs to be 1000 ms. If we wanted to switch to minutes, we
would use <code>tscale = 1/60, tunit = "min"</code>.</p>
<p>If the time scaling is incorrect, e.g. 1 frame, we would need to
rescale using <code>tscale = 0.07, tunit = "s"</code>,
<code>tscale = 70, tunit = "ms"</code>, or
<code>tscale = 0.07/60, tunit = "min"</code>.</p>
<div class="section level2">
<h2 id="recalibrating-trackmate-files">Recalibrating TrackMate files<a class="anchor" aria-label="anchor" href="#recalibrating-trackmate-files"></a>
</h2>
<p>When using <code><a href="../reference/compareDatasets.html">compareDatasets()</a></code>, it is possible to
recalibrate TrackMate XML files <em>en masse</em> by using a CSV file in
the condition subfolder containing the XML files, see
<code><a href="../articles/comparison.html">vignette("comparison")</a></code>. To recalibrate, a separate CSV file
is needed for each condition. Any conditions that do not need
recalibrating simply do not need a CSV file present. The CSV file can
have any name but must follow this format.</p>
<pre class="text"><code>value,unit
0.04,um
0.07,s
</code></pre>
<p>Using this file, all XML files in the folder will be recalibrated if
they are not already at 0.04 micron pixel size and 0.07 s per frame.
Adjustments smaller than 2.5% are ignored.</p>
<p><strong>Note that the calibration file should give the correct final
scaling required for all files in the folder.</strong></p>
<p>When the rescaling is done using a file like this, TrackMateR will
work out the scalar for you. So the file needs to specify what final
scaling is required.</p>
<p>In the situation where you have datasets with differing (but correct)
timescales and spatial units need to be corrected, use 0 for the value
corresponding to time (time rescaling will be ignored) and spatial
rescaling will go ahead. Similarly, if you have differening (but
correct) spatial scaling between datasets you can rescale time only by
using 0 for the spatial value. If you have datasets that need
calibrating differently, you will need to group them into
condition-level subfolders with a single csv file to specify the correct
parameters. Alternatively, consider going back and retracking in
TrackMate and specifying the correct parameters.</p>
</div>
<div class="section level2">
<h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h2>
<p>The recalibration is not smart, it doesn’t recognise the units and
calculate based off that. For example, it doesn’t know that 1000 ms are
1 s. So if you use the recalibration file method, be aware of this
limitation.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Stephen J Royle.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
