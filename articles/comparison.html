<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comparison of multiple datasets • TrackMateR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Comparison of multiple datasets">
<meta property="og:description" content="Learn how to get compare multiple datasets and conditions using TrackMateR.
">
<meta property="og:image" content="https://quantixed.github.io/TrackMateR/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">TrackMateR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/TrackMateR.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/TrackMateR.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/comparison.html">Comparison of multiple datasets</a>
    </li>
    <li>
      <a href="../articles/recalibration.html">Recalibration of datasets</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Change log</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/quantixed/TrackMateR" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Comparison of multiple datasets</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/quantixed/TrackMateR/blob/master/vignettes/comparison.Rmd" class="external-link"><code>vignettes/comparison.Rmd</code></a></small>
      <div class="hidden name"><code>comparison.Rmd</code></div>

    </div>

    
    
<p>In the first vignette <code><a href="../articles/TrackMateR.html">vignette("TrackMateR")</a></code> we saw how
to analyse one TrackMate XML file. This is one <em>dataset</em>, the
result of a TrackMate tracking session on a single movie. A more likely
scenario is that you have several datasets, from different
conditions.</p>
<p>In this scenario we would like to see:</p>
<ul>
<li>a report for each dataset</li>
<li>a compiled report for all datasets in that condition</li>
<li>a comparison between conditions of key parameters</li>
</ul>
<div class="section level2">
<h2 id="organising-your-data">Organising your data<a class="anchor" aria-label="anchor" href="#organising-your-data"></a>
</h2>
<p><strong>Recommended</strong> Start a new RStudio session in a new
directory using Create Project. We find it useful to follow <a href="https://martinctc.github.io/blog/rstudio-projects-and-working-directories-a-beginner's-guide/" class="external-link">this
convention</a> for RStudio projects. This <a href="https://gist.github.com/quantixed/42625f988a7b5da25b7e333c4a660b97" class="external-link">gist</a>
can be run in the console to quickly set up the folder structure for
your new project. Now place your data in a folder called
<code>Data/</code> in this directory.</p>
<p><strong>Required</strong> Place all your TrackMate XML files into
subfolders according to condition. For example you might have:</p>
<ul>
<li>Data/
<ul>
<li>Control/
<ul>
<li>cell1.xml</li>
<li>cell2.xml</li>
</ul>
</li>
<li>Drug/
<ul>
<li>cell1.xml</li>
<li>cell2.xml</li>
<li>cell3.xml</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Only one level of folders is allowed.</p>
</div>
<div class="section level2">
<h2 id="analysing-multiple-datasets">Analysing multiple datasets<a class="anchor" aria-label="anchor" href="#analysing-multiple-datasets"></a>
</h2>
<p>Once the data is in place, a single command will generate a series of
reports, summaries and a comparison</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quantixed.github.io/TrackMateR/">TrackMateR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/compareDatasets.html">compareDatasets</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The outputs are generated using standard parameters equivalent to
<code><a href="../reference/reportDataset.html">reportDataset()</a></code>. However, it is possible to change the
defaults by passing additional parameters. For example,
<code>compareDatasets(radius = 100)</code> will use the defaults for
everything except the radius for searching for neighbours in the track
density analysis (this example will use a value of 100 units for the
radius). Parameters that can be changed are:</p>
<ul>
<li>N, short - from MSD analysis</li>
<li>deltaT, mode, nPop, init, timeRes, breaks - from jump distance
calculation and fitting</li>
<li>radius - from track density analysis</li>
<li>msdplot - change the MSD plots from linear-linear (default) to
e.g. log-log. Options: loglog, loglin, linlog, linlin.</li>
</ul>
</div>
<div class="section level2">
<h2 id="outputs">Outputs<a class="anchor" aria-label="anchor" href="#outputs"></a>
</h2>
<p>In the example above, the code will produce the following in a
directory called <code>Output/</code></p>
<ul>
<li>Plots/
<ul>
<li>comparison.pdf</li>
<li>Control/
<ul>
<li>combined.pdf</li>
<li>report_1.pdf</li>
<li>report_2.pdf</li>
</ul>
</li>
<li>Drug/
<ul>
<li>combined.pdf</li>
<li>report_1.pdf</li>
<li>report_2.pdf</li>
<li>report_3.pdf</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>That is, the individual reports are saved with a new name (regardless
of the original XML filename), all datasets are combined (per condition)
in <code>combined.pdf</code> and a comparison of a summary of all
conditions is saved in the top level folder
(<code>comparison.pdf</code>).</p>
<p>As well as graphical outputs, <code><a href="../reference/compareDatasets.html">compareDatasets()</a></code> saves
several csv files of data (to <code>Outputs/Data/</code>). In each
condition folder, the data frames are collated and saved. This includes:
TrackMate data, MSD, jump distance and fractal dimension data. There is
also a csv file of the data frame used to plot the average msd for this
condition.</p>
<p>Above the condition folders, three csv files are saved. A collation
of the msd summary data <code>allMSCurves.csv</code> for all conditions;
summary data per dataset <code>allComparison.csv</code> which is the
data frame used for making the comparison plots; and
<code>allTraceData.csv</code> which is a data frame of properties per
trace per dataset for all conditions.</p>
<p>The idea with these files is that a user can load them back into R
and process the data in new ways and go beyond TrackMateR. An advanced
user can make their own data frames by running TrackMateR functions. A
good place to start is to peruse the code for
<code><a href="../reference/compareDatasets.html">compareDatasets()</a></code> and modify from there.</p>
</div>
<div class="section level2">
<h2 id="no-data-no-problem">No data? No problem!<a class="anchor" aria-label="anchor" href="#no-data-no-problem"></a>
</h2>
<p>If you don’t have your own datasets, or if you’d like to download
some data to process and understand how comparison between datasets work
in TrackMateR, there are some test datasets available <a href="https://doi.org/10.5281/zenodo.7985498" class="external-link">here</a>. There is raw
data, TrackMate XML files and example TrackMateR outputs for movies with
particles undergoing 6 different kinds of motion. To try it out,
download the files and place the contents of
<code>TrackMateOutput</code> folder into you RStudio project folder
under <code>Data</code> as described above. Now, run</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quantixed.github.io/TrackMateR/">TrackMateR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/compareDatasets.html">compareDatasets</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>to see how the data can be processed. Using the default parameters,
the track density is quite sparse, so one option to try to alter first
is <code>radius</code>,
i.e. <code>compareDatasets(radius = 4)</code>.</p>
<p>The test datasets are generated by tracking synthetic data. Since the
movies are synthetic, we have ground truth data for the exact position
and identities of the tracks. The ground truth datasets are useful for
verifying TrackMate outputs, benchmarking TrackMate performance and so
on. To load a single ground truth data set, use
<code>readGTFile("path/to/file")</code> and then recalibrate as you
would for a TrackMate file (the ground truth data is in pixels and
frames). Or you can compare many ground truth csv files using
<code>compareGTDatasets("path/to/Data")</code> and specifying the
rescaling arguments.</p>
<p>Finally, to generate your own “ground truth” data without using the
code <a href="https://doi.org/10.5281/zenodo.7985498" class="external-link">here</a>, all that
is required is a csv file specifying the tracks with columns
TrackID,x,y,frame.</p>
</div>
<div class="section level2">
<h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h2>
<p>When using <code><a href="../reference/compareDatasets.html">compareDatasets()</a></code> it is assumed that the
files and datasets have similar scaling. If files need recalibration,
see <code>vignette("calibration")</code>. Be aware that if datasets with
varying calibration are used, some plots generated by
<code><a href="../reference/compareDatasets.html">compareDatasets()</a></code> will be misleading. If the scaling is
different between conditions:</p>
<ul>
<li>if the scaling is correct and consistent - all plots are OK</li>
<li>if the time scaling is correct but inconsistent within a condition
<ul>
<li>jump distance plot - in <code>combined.pdf</code> will be
meaningless, individual plots are OK</li>
<li>MSD plot - combined average may look odd since different durations
may be used. This is also an issue if movies have different lengths or
if tracking is poor in some movies.</li>
</ul>
</li>
<li>if the spatial scaling is correct but inconsistent - all plots are
OK</li>
</ul>
<p>Note that if either spatial or temporal scaling is incorrect, most of
the plots will be garbage.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Stephen J Royle.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
